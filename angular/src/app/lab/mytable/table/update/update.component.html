<div class="dialog">
  <h1 mat-dialog-title>
    <mat-toolbar role="toolbar" class="task-header">
      <span>{{title}}</span>
    </mat-toolbar>
    <mat-divider></mat-divider>
  </h1>
  <div class="content">
    <mat-dialog-content>

      <!-- <pre>
        {{myForm.value | json}}
      </pre> -->

      <form [formGroup]="myForm">

        <div *ngFor="let e of columns">

          <!-- {{e | json}} -->

          <ng-container *ngIf="e.formField === 'text'">
            <mat-form-field appearance="fill" class="col-md-6">
              <mat-label>{{e.name}}</mat-label>
              <input matInput [formControl]="myForm.controls[e.key]" [required]="e.required">
            </mat-form-field>
          </ng-container>

          <ng-container *ngIf="e.formField === 'checkbox'">
            <mat-checkbox class="col-md-6" [formControl]="myForm.controls[e.key]" labelPosition="before">
              {{e.name}}
            </mat-checkbox>
          </ng-container>

          <mat-form-field appearance="fill" *ngIf="e.formField === 'select'">
            <mat-label>{{e.name}}</mat-label>
            <mat-select class="col-md-6" [formControl]="myForm.controls[e.key]">
              <mat-option *ngFor="let o of service.set(e.serviceName).get() | async" [value]="o.id">
                {{o.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>


        </div>


      </form>

    </mat-dialog-content>

    <mat-dialog-actions align="end">
      <button mat-button (click)="onNoClick()" type="button">Annuler</button>
      <button mat-raised-button color="primary" (click)="onOkClick(myForm.value)" [disabled]="myForm.invalid"
        cdkFocusInitial>Enregistre</button>
    </mat-dialog-actions>
  </div>
</div>
